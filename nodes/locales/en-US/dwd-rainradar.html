<script type="text/x-red" data-help-name="dwd-rainradar">
    <p>
        The <b>DWD Rain Radar</b> node provides access to current precipitation information
        from the German Weather Service (DWD). It is designed to work with the RADOLAN
        radar products and to return a simplified JSON structure for use in Node-RED flows.
    </p>

    <h3>Configuration</h3>

    <dl>
        <dt>Name</dt>
        <dd>Optional display name for the node. If left empty, a default label is used.</dd>

        <dt>Area mode</dt>
        <dd>
            Defines how the area of interest is selected:
            <ul>
                <li><b>Whole Germany</b> – uses the full DWD radar domain.</li>
                <li><b>Bounding box</b> – specify minimum/maximum latitude and longitude.</li>
                <li><b>Point + radius</b> – specify latitude, longitude and radius in km.</li>
            </ul>
        </dd>

        <dt>Auto-refresh (sec)</dt>
        <dd>
            Interval in seconds for automatic background updates. A value of <code>0</code> disables
            auto-refresh. Any value greater than zero will trigger periodic data fetches.
        </dd>

        <dt>Backend URL</dt>
        <dd>
            Optional HTTP endpoint that returns rain radar data as JSON. When this field is set,
            the node will call the configured URL and use the response as its output payload.
            The expected structure is:
            <pre>{
  "meta": { ... },
  "summary": { ... },
  "grid": { ... },
  "image": { ... }
}</pre>
            If the field is left empty, an internal dummy implementation is used for development
            and testing.
        </dd>

        <dt>Fetch on deploy</dt>
        <dd>
            When enabled, the node performs an initial fetch shortly after the flow is deployed.
            A full deploy ensures that the node instance is created and the first fetch is triggered.
        </dd>

        <dt>Output options</dt>
        <dd>
            Controls which parts of the data are included in <code>msg.payload</code>:
            <ul>
                <li><b>Output summary</b> – aggregated precipitation information.</li>
                <li><b>Output full grid</b> – raster representation with width, height and values.</li>
                <li><b>Output image (PNG/Base64)</b> – reserved for future use.</li>
            </ul>
        </dd>

        <dt>Diagnostics</dt>
        <dd>
            When enabled, additional diagnostic messages are written to the Node-RED log. This is
            useful while developing or debugging flows.
        </dd>
    </dl>

    <h3>Inputs</h3>
    <p>
        Any incoming message triggers a data fetch using the current configuration. The content of
        the input message is not evaluated in the initial version.
    </p>

    <h3>Outputs</h3>
    <p>
        The node outputs a single message where <code>msg.payload</code> contains the rain radar
        information. The structure is aligned with the other DWD nodes (pollen, forecast, warnings),
        so it can easily be combined in dashboards and scorecards.
    </p>

    <h3>Status</h3>
    <p>
        The node uses status text to indicate its current state (loading, ready, number of cells,
        errors, etc.). The text is localized according to the Node-RED editor language settings.
    </p>
</script>