<script type="text/html" data-help-name="dwd-rainradar">
    <p>
        Der Node <b>DWD-Regenradar</b> (RADOLAN) stellt Niederschlagsradardaten
        des Deutschen Wetterdienstes (DWD) für Node-RED-Flows zur Verfügung.
        Er eignet sich, um die aktuelle Regenintensität über Deutschland oder
        in einer ausgewählten Region zu analysieren.
    </p>

    <h3>Konfiguration</h3>
    <dl>
        <dt>Name</dt>
        <dd>
            Optionaler Anzeigename im Node-RED-Editor. Wenn leer, wird eine
            Standardbezeichnung verwendet.
        </dd>

        <dt>Gebietsmodus</dt>
        <dd>
            Legt fest, wie das Interessensgebiet definiert wird:
            <ul>
                <li><b>Ganz Deutschland</b>: gesamter Radarbereich</li>
                <li><b>Bounding Box</b>: min./max. Breite und Länge (WGS84)</li>
                <li><b>Punkt + Radius</b>: Zentrumskoordinate und Radius in Kilometern</li>
            </ul>
        </dd>

        <dt>Auto-Refresh (Sek.)</dt>
        <dd>
            Intervall in Sekunden für automatische Aktualisierungen.
            Der Wert <code>0</code> deaktiviert den Auto-Refresh.
        </dd>

        <dt>Beim Deploy abrufen</dt>
        <dd>
            Wenn aktiv, ruft der Node unmittelbar nach dem Deploy Radarwerte ab.
        </dd>

        <dt>Ausgabe-Optionen</dt>
        <dd>
            Steuert den Aufbau von <code>msg.payload</code>:
            <ul>
                <li><b>Zusammenfassung</b> – aggregierte Kennwerte (Max/Ø, Abdeckung)</li>
                <li><b>Vollständiges Raster</b> – vollauflösendes Niederschlagsraster (kann groß sein)</li>
                <li><b>Bild (PNG/Base64)</b> – kodiertes Radarbild für Dashboards oder Templates</li>
            </ul>
        </dd>

        <dt>Diagnose</dt>
        <dd>
            Bei Aktivierung schreibt der Node zusätzliche Diagnoseinformationen ins Node-RED-Log.
        </dd>
    </dl>

    <h3>Eingänge</h3>
    <p>
        Jede eingehende Nachricht löst einen Abruf der Radardaten für die
        konfigurierte Region aus. Der Inhalt der Nachricht wird in der
        Anfangsversion nicht ausgewertet und dient nur als Trigger.
    </p>

    <h3>Ausgänge</h3>
    <p>
        Der Node erzeugt eine Nachricht mit den Radarinformationen:
    </p>
    <dl>
        <dt>msg.payload.meta</dt>
        <dd>
            Metadaten wie Quelle, Zeitstempel und Modus.
        </dd>

        <dt>msg.payload.summary</dt>
        <dd>
            Vorhanden, wenn <b>Zusammenfassung</b> aktiviert ist. Enthält aggregierte
            Information zur Niederschlagssituation im Interessensgebiet.
        </dd>

        <dt>msg.payload.grid</dt>
        <dd>
            Vorhanden, wenn <b>Vollständiges Raster</b> aktiviert ist. Enthält eine
            Rasterdarstellung des Niederschlagsfeldes (Breite, Höhe, Werte).
        </dd>

        <dt>msg.payload.image</dt>
        <dd>
            Vorhanden, wenn <b>Bild (PNG/Base64)</b> aktiviert ist. Enthält ein
            kodiertes Radarbild für Dashboards oder Templates.
        </dd>
    </dl>

    <h3>Status</h3>
    <p>
        Der Node zeigt seinen Zustand über den Status unterhalb des Nodes an:
    </p>
    <ul>
        <li><b>lade…</b> – Radardaten werden abgerufen</li>
        <li><b>bereit</b> – wartet auf Eingänge oder Auto-Refresh</li>
        <li><b>N Zellen</b> – Anzahl der Rasterzellen in letzter Auswertung</li>
        <li><b>Fehler</b> – beim Abruf oder der Verarbeitung ist ein Fehler aufgetreten</li>
    </ul>

    <h3>Hinweise</h3>
    <p>
        Diese erste Version nutzt noch eine Platzhalter-Implementierung und
        ruft die echten RADOLAN-Daten des DWD noch nicht ab. Eine zukünftige
        Version wird die offiziellen OpenData-Radarendpunkte direkt anbinden.
    </p>
</script>