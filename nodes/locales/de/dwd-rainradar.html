<script type="text/x-red" data-help-name="dwd-rainradar">
    <p>
        Der <b>DWD-Regenradar</b>-Node stellt aktuelle Niederschlagsinformationen des
        Deutschen Wetterdienstes (DWD) zur Verfügung. Er ist dafür ausgelegt, mit den
        RADOLAN-Radarprodukten zu arbeiten und eine vereinfachte JSON-Struktur für
        Node-RED-Flows bereitzustellen.
    </p>

    <h3>Konfiguration</h3>

    <dl>
        <dt>Name</dt>
        <dd>
            Optionaler Anzeigename für den Node. Wenn leer, wird eine Standardbezeichnung verwendet.
        </dd>

        <dt>Gebietsauswahl</dt>
        <dd>
            Legt fest, wie das betrachtete Gebiet ausgewählt wird:
            <ul>
                <li><b>Ganz Deutschland</b> – verwendet das gesamte DWD-Radargebiet.</li>
                <li><b>Bounding Box</b> – Minimal- und Maximal-Breitengrad sowie -Längengrad angeben.</li>
                <li><b>Punkt + Radius</b> – Breitengrad, Längengrad und Radius in km angeben.</li>
            </ul>
        </dd>

        <dt>Auto-Aktualisierung (Sek.)</dt>
        <dd>
            Intervall in Sekunden für automatische Aktualisierungen. Der Wert
            <code>0</code> deaktiviert die Auto-Aktualisierung. Ein Wert &gt; 0 löst
            periodische Abrufe aus.
        </dd>

        <dt>Backend-URL</dt>
        <dd>
            Optionale HTTP-URL, die Regenradar-Daten als JSON zurückliefert. Ist dieses Feld
            gesetzt, ruft der Node die hinterlegte URL auf und verwendet die Antwort als
            <code>msg.payload</code>. Erwartet wird eine Struktur wie:
            <pre>{
  "meta": { ... },
  "summary": { ... },
  "grid": { ... },
  "image": { ... }
}</pre>
            Wenn das Feld leer bleibt, nutzt der Node eine interne Dummy-Implementierung für
            Entwicklung und Tests.
        </dd>

        <dt>Beim Deploy abrufen</dt>
        <dd>
            Wenn aktiviert, führt der Node kurz nach dem Deploy einen initialen Abruf durch.
            Ein vollständiges Deploy stellt sicher, dass die Node-Instanz neu erzeugt wird.
        </dd>

        <dt>Ausgabeoptionen</dt>
        <dd>
            Legt fest, welche Teile der Daten in <code>msg.payload</code> enthalten sind:
            <ul>
                <li><b>Zusammenfassung ausgeben</b> – aggregierte Niederschlagsinformationen.</li>
                <li><b>Gesamtes Raster ausgeben</b> – Raster mit Breite, Höhe und Werten.</li>
                <li><b>Bild (PNG/Base64) ausgeben</b> – für zukünftige Erweiterungen vorgesehen.</li>
            </ul>
        </dd>

        <dt>Diagnose</dt>
        <dd>
            Wenn aktiviert, schreibt der Node zusätzliche Diagnoseinformationen in das Node-RED-Log.
            Das ist besonders während der Entwicklung und Fehlersuche hilfreich.
        </dd>
    </dl>

    <h3>Eingänge</h3>
    <p>
        Jeder eingehende Nachrichten-Trigger löst einen Abruf mit der aktuellen Konfiguration aus.
        Der Inhalt der Eingangs-Nachricht wird in der ersten Version nicht ausgewertet.
    </p>

    <h3>Ausgänge</h3>
    <p>
        Der Node gibt eine Nachricht aus, in der <code>msg.payload</code> die Regenradar-Daten
        enthält. Die Struktur ist an die anderen DWD-Nodes (Pollen, Vorhersage, Warnungen)
        angelehnt, sodass sich die Nodes leicht in Dashboards und Scorecards kombinieren lassen.
    </p>

    <h3>Status</h3>
    <p>
        Der Node nutzt Status-Texte, um den aktuellen Zustand anzuzeigen (Laden, bereit,
        Anzahl der Zellen, Fehler usw.). Die Texte werden entsprechend der im Node-RED-Editor
        eingestellten Sprache lokalisiert.
    </p>
</script>